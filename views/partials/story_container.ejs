<div class="story-container">
    <div class="info">
        <% if (user) { %>

        <div class="author">author: <%= story.author.fullname %></div>
        <% } else{ %>
        <div class="author">author: annonymos</div>
        <% } %>
        <div class="topic">topic: <%= story.topic %></div>
    </div>
    <div class="story">
        <div class="message"><%= story.message %></div>
    </div>
    <% if (user) { %> <% if (user.id === story.author.id) { %>
    <button
        id="deleteBtn"
        onclick="deleteStory(this.value)"
        value="<%= story.id %>"
    >
        Delete
    </button>
    <% } %> <% } %>
</div>

<script>
    async function deleteStory(id) {
        try {
            const res = await fetch(`/story/${id}`, {
                method: "delete",
            });

            location.assign("/");
        } catch (error) {
            console.log(error);
        }
    }
</script>
